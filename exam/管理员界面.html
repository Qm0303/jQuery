<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>公司人员管理系统</title>
    <!-- 引入 Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <!-- 引入 Bootstrap 图标库 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <!-- 引入 jQuery -->
    <script src="jQuery.js"></script>
    <!-- 引入 Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- 引入 Mock.js -->
    <script src="mock.js"></script>
    <style>
        body {
            padding-top: 56px;
            background-color: rgba(154, 240, 240, 0.256);
        }

.navbar {
            height: 30px;
            background-image: url('a1.png');
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
        }

.sidebar {
            position: fixed;
            top: 30px;
            left: 0;
            bottom: 0;
            width: 200px;
            background-color: #7dc8e1f0;
            z-index: 1000;
            padding: 20px;
        }

.sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }

.sidebar-menu li {
            margin-bottom: 10px;
        }

.sidebar-menu a {
            color: #333;
            text-decoration: none;
            display: block;
            padding: 5px 10px;
            border-radius: 5px;
        }

.sidebar-menu a:hover {
            background-color: #006bd59e;
        }

.content {
            margin-left: 200px;
            padding: 15px;
        }

        /* 调整头部导航栏样式，使标题居中 */
.navbar-brand {
            margin: 0 auto;
            text-align: center;
        }

        /* 个人信息显示区域样式 */
.personal-info {
            display: none;
            text-align: center;
        }

.department-info {
            display: none;
            text-align: center;
        }
.welcome-message {
            font-weight: bold;
            color: #83adcd;
        }

        /* 为退出设置小一号字体 */
.nav-item:last-child.nav-link {
            font-size: 0.1rem;
        }

        /* 薪资详情区域样式 */
.salary-info {
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 5px;
            text-align: center;
        }

.salary-info p {
            margin-bottom: 10px;
        }

        /* 考勤记录详情区域样式 */
.attendance-info {
            padding: 20px;
            background-color: #e9ecef;
            border-radius: 5px;
            text-align: center;
        }

.attendance-info p {
            margin-bottom: 10px;
            text-align: center;
        }

        /* 有效绩效详情区域样式 */
.performance-info {
            padding: 20px;
            background-color: #dee2e6;
            border-radius: 5px;
            text-align: center;
        }

.performance-info p {
            margin-bottom: 10px;
        }

        /* 新增按钮样式 */
        button.edit-btn {
            margin-top: 10px;
        }
    </style>
</head>

<body>
    <!-- 头部栏 -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container-fluid">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="登录注册界面.html" id="logoutLink"><i class="bi bi-reply"></i>退出</a>
                </li>
            </ul>
            <a class="navbar-brand" href="#"><span style="display:none;">个人中心</span></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs_target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <span class="nav-link welcome-message">欢迎你管理员，瞿萌</span>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="修改密码界面.html" id="changePasswordLink"><i class="bi bi-key-fill"></i>修改密码</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- 左侧边栏 -->
    <div class="sidebar">
        <ul class="sidebar-menu">
            <li><a href="#" data-target="personal-info"><i class="bi bi-file-person-fill"></i>个人信息</a></li>
            <li><a href="#" data-target="department-info"><i class="bi bi-buildings"></i>部门信息</a></li>
            <li><a href="#" data-target="attendance-info"><i class="bi bi-box-fill"></i>考勤记录</a></li>
            <li><a href="#" data-target="performance-info"><i class="bi bi-back"></i>有效绩效</a></li>
            <li><a href="#" data-target="salary-info"><i class="bi bi-bank"></i>薪资中心</a></li>
            <li><a href="#" data-target="job-allocation"><i class="bi bi-people-fill"></i>岗位分配</a></li>
        </ul>
    </div>

    <!-- 主体部分 -->
    <div class="content">
        <!-- 个人信息显示区域 -->
        <div class="personal-info">
            <h3>个人信息详情</h3>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td>
                            <p><span class="info-label">姓名：</span><span id="name">瞿萌</span></p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p><span class="info-label">员工ID：</span><span id="employeeId">1001</span></p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p><span class="info-label">性别：</span><span id="gender">女</span></p>
                        </td>
                    </tr>
                    <tr>
                    <td>
                        <p><span class="info-label">年龄：</span><span id="age">20</span></p>
                    </tr>
                    <tr>
                        <td>
                            <p><span class="info-label">部门：</span><span id="department">研发部</span></p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p><span class="info-label">职业：</span><span id="position">工程师</span></p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 部门信息显示区域 -->
        <div class="department-info">
            <h3>部门成员列表</a></h3>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th scope="col">姓名</th>
                        <th scope="col">员工ID</th>
                        <th scope="col">部门</th>
                        <th scope="col">操作</th>
                    </tr>
                </thead>
                <tbody id="departmentMembers">
                    <!-- 部门成员数据将在这里动态生成 -->
                </tbody>
            </table>
        </div>

        <!-- 薪资详情显示区域 -->
        <div class="salary-info">
            <h3>薪资详情</h3>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td><p><strong>基本工资：</strong></p></td>
                        <td><p><span id="basic-salary">8000</span>元</p></td>
                    </tr>
                    <tr>
                        <td><p><strong>绩效工资：</strong></p></td>
                        <td><p><span id="performance-salary">2000</span>元</p></td>
                    </tr>
                    <tr>
                        <td><p><strong>奖金：</strong></p></td>
                        <td><p><span id="bonus">1000</span>元</p></td>
                    </tr>
                    <tr>
                        <td><p><strong>扣除项：</strong></p></td>
                        <td><p><span id="deduction">500</span>元</p></td>
                    </tr>
                    <tr>
                        <td><p><strong>实发工资：</strong></p></td>
                        <td><p><span id="actual-salary">10500</span>元</p></td>
                    </tr>
                </tbody>
            </table>
            <button class="btn btn-warning edit-btn" onclick="editSalary()">修改薪资</button>
        </div>

        <!-- 考勤记录详情显示区域 -->
        <div class="attendance-info">
            <h3>考勤记录详情</h3>
            <p><strong>本月出勤天数：</strong> <span id="attendance-days">22</span>天</p>
            <p><strong>迟到次数：</strong> <span id="late-times">2</span>次</p>
            <p><strong>早退次数：</strong> <span id="early-leave-times">1</span>次</p>
            <p><strong>请假天数：</strong> <span id="leave-days">3</span>天</p>
            <button class="btn btn-warning edit-btn" onclick="editAttendance()">修改考勤</button>
        </div>

        <!-- 有效绩效详情显示区域 -->
        <div class="performance-info">
            <h3>有效绩效详情</h3>
            <p><strong>绩效得分：</strong> <span id="performance-score">85</span>分</p>
            <p><strong>绩效等级：</strong> <span id="performance-level">B</p>
            <p><strong>绩效评价：</strong> <span id="performance-comment">表现良好，部分任务完成质量较高，但仍有提升空间。</span></p>
            <button class="btn btn-warning edit-btn" onclick="editPerformance()">修改绩效</button>
        </div>

        <!-- 岗位分配页面 -->
        <div class="job-allocation" style="display:none;">
            <h1 class="text-center">员工入职及岗位分配</h1>
            <form id="employee-form">
                <div class="mb-2">
                    <label for="name" class="form-label">姓名</label>
                    <input type="text" class="form-control" id="name" required>
                </div>
                <div class="mb-2">
                    <label for="gender" class="form-label">性别</label>
                    <select class="form-select" id="gender" required>
                        <option value="男">男</option>
                        <option value="女">女</option>
                    </select>
                </div>
                <div class="mb-2">
                    <label for="department" class="form-label">部门</label>
                    <select class="form-select" id="department" required>
                        <option value="技术部">技术部</option>
                        <option value="市场部">市场部</option>
                        <option value="财务部">财务部</option>
                    </select>
                </div>
                <div class="mb-2">
                    <label for="position" class="form-label">岗位</label>
                    <select class="form-select" id="position" required>
                        <option value="程序员">程序员</option>
                        <option value="市场专员">市场专员</option>
                        <option value="会计">会计</option>
                    </select>
                </div>
                <div class="mb-2">
                    <label for="phone" class="form-label">联系电话</label>
                    <input type="text" class="form-control" id="phone" required>
                </div>
                <div class="mb-2">
                    <label for="email" class="form-label">电子邮箱</label>
                    <input type="email" class="form-control" id="email" required>
                </div>
                <button type="submit" class="btn btn-primary">提交</button>
            </form>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            // 找到个人信息菜单项对应的链接元素并触发点击事件
            $('.sidebar-menu a[data-target="personal-info"]').click();
            generateDepartmentMembers();
        });

        // 当点击左侧菜单时
        $('.sidebar-menu a').click(function (e) {
            e.preventDefault();
            // 隐藏所有可能显示的信息区域
            $('.content > div').hide();
            var target = $(this).data('target');
            if (target) {
                // 显示对应的信息区域
                $('.' + target).show();
                if (target === 'department-info') {
                    // 如果点击的是部门信息，生成并显示部门成员数据
                    generateDepartmentMembers();
                }
            }
        });

        function generateDepartmentMembers() {
            var members = Mock.mock({
                'members|10': [
                    {
                        'name': '@cname',
                        'employeeId': '@integer(1000, 10000)',
                        'department': '@natural(100, 999)'
                    }
                ]
            });
            var $tbody = $('#departmentMembers');
            $tbody.empty();
            for (var i = 0; i < members.members.length; i++) {
                var member = members.members[i];
                var row = '<tr><td>' + member.name + '</td><td>' + member.employeeId + '</td><td>' + member.department + '</td><td>' +
                    '<div class="action-buttons">' +
                    '<button class="btn btn-warning btn-sm edit-button"><i class="bi bi-pencil-square "></i> 修改</button>' +
                    '<button class="btn btn-danger btn-sm delete-button"><i class="bi bi-trash "></i> 删除</button>' +
                    '</div>' +
                    '</td></tr>';
                $tbody.append(row);
            }

            // 为修改按钮绑定点击事件，实现前端修改功能
            $('.edit-button').click(function () {
                let row = $(this).closest('tr');
                let name = row.find('td').eq(0).text();
                let employeeId = row.find('td').eq(1).text();
                let department = row.find('td').eq(2).text();

                let newName = prompt('请输入新的姓名', name);
                let newEmployeeId = prompt('请输入新的员工ID', employeeId);
                let newDepartment = prompt('请输入新的部门', department);

                if (newName!== null) {
                    row.find('td').eq(0).text(newName);
                }
                if (newEmployeeId!== null) {
                    row.find('td').eq(1).text(newEmployeeId);
                }
                if (newDepartment!== null) {
                    row.find('td').eq(2).text(newDepartment);
                }
            });

            // 为删除按钮绑定点击事件，实现前端删除功能
            $('.delete-button').click(function () {
                $(this).closest('tr').remove();
            });
        }

        // 获取退出按钮元素并添加点击事件处理函数，这里使用原生JavaScript来添加点击事件（也可以使用jQuery的方式，$(#logoutLink).click()）
        const logoutLink = document.getElementById('logoutLink');
        logoutLink.addEventListener('click', function (e) {
            // 可以在这里添加一些额外的逻辑，比如清除本地存储的用户相关信息等（如果有需要的）
            window.location.href = this.href;
        });

        // 获取修改密码按钮元素并添加点击事件处理函数
        const changePasswordLink = document.getElementById('changePasswordLink');
        changePasswordLink.addEventListener('click', function (e) {});

        // 薪资修改功能函数，修改后重新计算实发工资
        function editSalary() {
            var newBasicSalary = parseFloat(prompt('请输入新的基本工资', $('#basic-salary').text()));
            var newPerformanceSalary = parseFloat(prompt('请输入新的绩效工资', $('#performance-salary').text()));
            var newBonus = parseFloat(prompt('请输入新的奖金', $('#bonus').text()));
            var newDeduction = parseFloat(prompt('请输入新的扣除项', $('#deduction').text()));

            if (!isNaN(newBasicSalary)) {
                $('#basic-salary').text(newBasicSalary.toFixed(2));
            }
            if (!isNaN(newPerformanceSalary)) {
                $('#performance-salary').text(newPerformanceSalary.toFixed(2));
            }
            if (!isNaN(newBonus)) {
                $('#bonus').text(newBonus.toFixed(2));
            }
            if (!isNaN(newDeduction)) {
                $('#deduction').text(newDeduction.toFixed(2));
            }

            calculateActualSalary();
        }

        // 计算实发工资的函数
        function calculateActualSalary() {
            var basic = parseFloat($('#basic-salary').text());
            var performance = parseFloat($('#performance-salary').text());
            var bonus = parseFloat($('#bonus').text());
            var deduction = parseFloat($('#deduction').text());
            var actual = basic + performance + bonus - deduction;
            $('#actual-salary').text(actual.toFixed(2));
        }
    </script>